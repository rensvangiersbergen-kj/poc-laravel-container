name: laravel-poc-container
services:
  nginx-fpm:
    container_name: nginx-fpm
    build:
      context: .
      dockerfile: ./docker/nginx-fpm/Dockerfile
    env_file:
      - .env
    restart: unless-stopped # Automatically restart unless the service is explicitly stopped
    networks:
      - laravel
    ports:
      # Map port 80 inside the container to the port specified by 'NGINX_PORT' on the host machine.
      # -----------------------------------------------------------
      # This allows external access to the Nginx web server running inside the container.
      # For example, if 'NGINX_PORT' is set to '8080', accessing 'http://localhost:8080' will reach the application.
      # -----------------------------------------------------------
      - "${NGINX_PORT:-80}:80"

networks:
  # Attach the service to the 'laravel' network.
  # -----------------------------------------------------------
  # This custom network allows all services within it to communicate using their service names as hostnames.
  # For example, 'php-fpm' can connect to 'postgres' by using 'postgres' as the hostname.
  # -----------------------------------------------------------
  laravel:
